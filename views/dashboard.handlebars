<nav class="white" role="navigation">
  <div class="nav-wrapper container">
    <a id="logo-container" href="/dashboard" class="brand-logo"><img src="/img/Logo.png" class="logo-img"></a>
    <ul class="right hide-on-med-and-down">
      <li><a href="/logout">Logout</a></li>
    </ul>
    <ul id="nav-mobile" class="side-nav">
      <li><a href="/logout">Logout</a></li>
    </ul>
    <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
  </div>
</nav>
<div id="index-banner" class="parallax-container">
  <div class="container body-container row">
    <div class="Dashboard-Header ">
      <h2>Welcome to Dashboard!</h2>
      <h2>{{user.firstname}}</h2>
      <div class="points">
        <img class="badge" src="/img/badge1.png">
      </div>
    </div>
    <div class="Dashboard-Content">
      <div class='row'>
        <br>
        <div class="col s12 m12">
          <div class='input-field col s12 m12'>
            <input type="text" placeholder="Search for Beer **** This is The API *** " name="input" id="input">
            <label for='beersearch'></label>
          </div>
          <a type="button" id="button" class="btn btn-default" class='col s12 btn btn-large waves-effect '>Search a beer!</a>
        </div>
        <br>
        <div class='row'>
          <div class='input-field col s12 m12'>
            <label for='addbeer'></label>
            <a type="button" href="dashboard/beer" id="button" class="btn btn-default" class='col s12 btn btn-large waves-effect '>Add A New Beer</a>
          </div>
          <br>
        </div>
        <div class="parallax"><img id="barrel" src="/img/beer-barrel-keg-cask-oak.jpg" alt="Unsplashed background img 1"></div>
      </div>
    </div>
  </div>
  <div class="map">
    <div class="overlay" onClick="style.pointerEvents='none'"></div>
    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1552878.5726217635!2d-74.38828460923867!3d40.52024342056881!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c257f4a1665eb1%3A0xc2a9712d875a0e10!2sNew+Jersey+Beer+Company!5e0!3m2!1sen!2sph!4v1496314954609"
      frameborder="0" style="border:0; width:100%; height: 300px;" allowfullscreen></iframe>
  </div>
</div>
<div class="section">
  <div class="row">
    <hr>
    <div class="center">
      <h3>BEST BEER AROUND YOUR AREA</h3>
    </div>
    <hr>

    <div id="beerHolder">
    </div>
    <div class="col s12 m4">
      <div class="card">
        <div class="card-image">
          <img src="/img/beer1.jpg">
          <span class="card-title">BEER 1
<div class="rating-box">
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_half</i>
</div>
</span>
          <a href="login" class="btn-floating halfway-fab waves-effect waves-light red"><i class="material-icons">add</i></a>
        </div>
        <div class="card-content">
          <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
        </div>
      </div>
    </div>
    <div class="col s12 m4">
      <div class="card">
        <div class="card-image">
          <img src="/img/beer2.jpg">
          <span class="card-title">BEER 2
<div class="rating-box">
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_half</i>
</div>
</span>
          <a href="login" class="btn-floating halfway-fab waves-effect waves-light red"><i class="material-icons">add</i></a>
        </div>
        <div class="card-content">
          <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
        </div>
      </div>
    </div>
    <div class="col s12 m4">
      <div class="card">
        <div class="card-image">
          <img src="/img/beer3.jpg">
          <span class="card-title">BEER 3
<div class="rating-box">
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_half</i>
</div>
</span>
          <a href="login" class="btn-floating halfway-fab waves-effect waves-light red"><i class="material-icons">add</i></a>
        </div>
        <div class="card-content">
          <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
        </div>
      </div>
    </div>
    <div class="col s12 m4">
      <div class="card">
        <div class="card-image">
          <img src="/img/beer4.jpg">
          <span class="card-title">BEER 4
<div class="rating-box">
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_border</i>
</div>
</span>
          <a href="login" class="btn-floating halfway-fab waves-effect waves-light red"><i class="material-icons">add</i></a>
        </div>
        <div class="card-content">
          <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
        </div>
      </div>
    </div>
    <div class="col s12 m4">
      <div class="card">
        <div class="card-image">
          <img src="/img/beer5.jpg">
          <span class="card-title">BEER 5
<div class="rating-box">
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_border</i>
<i class="material-icons">star_border</i>
</div>
</span>
          <a href="login" class="btn-floating halfway-fab waves-effect waves-light red"><i class="material-icons">add</i></a>
        </div>
        <div class="card-content">
          <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
        </div>
      </div>
    </div>
    <div class="col s12 m4">
      <div class="card">
        <div class="card-image">
          <img src="/img/beer6.jpg">
          <span class="card-title">BEER 6
<div class="rating-box">
<i class="material-icons">star_rate</i>
<i class="material-icons">star_rate</i>
<i class="material-icons">star_border</i>
<i class="material-icons">star_border</i>
<i class="material-icons">star_border</i>
</div>
</span>
          <a href="login" class="btn-floating halfway-fab waves-effect waves-light red"><i class="material-icons">add</i></a>
        </div>
        <div class="card-content">
          <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
        </div>
      </div>
    </div>
    <!--Quest-->
    <hr>
    <div class="center">
      <h3>BEER QUEST</h3>
    </div>
    <hr>
    <div class="col s12 m4">
      <div class="card">
        <div class="card-image">
          <img src="/img/BAR1.jpg">
          <span class="card-title">QUEST 1</span>
        </div>
        <div class="card-content">
          <p>Visit <a href="#!">CloverLeaf</a> Bar, try Beer 2 and Beer 3. Rate each beer and unlock your new badge</p>
        </div>
        <div class="card-action">
          <a href="#">ENTER QUEST</a>
        </div>
      </div>
    </div>
    <div class="col s12 m4">
      <div class="card">
        <div class="card-image">
          <img src="/img/BAR2.jpg">
          <span class="card-title">QUEST 2</span>
        </div>
        <div class="card-content">
          <p>Visit <a href="#!">TheBrassTap</a> Bar, try Beer 22 and Beer 13. Rate each beer and unlock free spacial beer</p>
        </div>
        <div class="card-action">
          <a href="#">ENTER QUEST</a>
        </div>
      </div>
    </div>
    <div class="col s12 m4">
      <div class="card">
        <div class="card-image">
          <img src="/img/BAR3.jpg">
          <span class="card-title">QUEST 3</span>
        </div>
        <div class="card-content">
          <p>Visit <a href="#!">YardHouse</a> Bar, try Beer 12 and Beer 33. Rate each beer and get your free cold BEER 1</p>
        </div>
        <div class="card-action">
          <a href="#">ENTER QUEST</a>
        </div>
      </div>
    </div>
    <!--Quest-->
  </div>
</div>
</div>
<!--CONTENT-->
<footer class="page-footer ">
  <div class="container">
    <div class="row">
      <div class="col l6 s12">
        <h5 class="white-text">BEER RATE APP</h5>
        <p class="grey-text text-lighten-4">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur sit amet eros vel dolor eleifend dapibus nec at velit. </p>
      </div>
      <div class="col l3 s12">
        <h5 class="white-text">Partner With Us</h5>
        <ul>
          <li><a class="white-text" href="#!">Advertise</a></li>
          <li><a class="white-text" href="#!">Submit Your Store</a></li>
          <li><a class="white-text" href="#!">Submit Your Story</a></li>
          <li><a class="white-text" href="#!">FAQ</a></li>
        </ul>
      </div>
      <div class="col l3 s12">
        <h5 class="white-text">Follow us</h5>
        <ul>
          <li><a class="white-text" href="#!">Facebook</a></li>
          <li><a class="white-text" href="#!">Twitter</a></li>
          <li><a class="white-text" href="#!">Instagram</a></li>
          <li><a class="white-text" href="#!">Google Plus</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="footer-copyright">
    <div class="container">
      Made by <a class="white-text text-lighten-3" href="#!">BEER RATE APP</a>
    </div>
  </div>
</footer>
<script type="text/javascript">
  // ======================================

  $("#input").on("keypress", function(e) {
    if (e.which == 13) {
      console.log('You pressed enter');
      getBeer();
    }
  })

  // ======================================


  $("#button").on("click", function(e) {
    e.preventDefault();
    console.log("You pressed the button");
    getBeer();
  });

  // ======================================


  function getBeer() {
    var url = location.origin;
    console.log(url);
    console.log($("#input").val());
    url = url + "/beers/" + $("#input").val();
    console.log(url);

    $.ajax({
      type: "GET",
      url: url,
      dataType: 'json',
      success: function(res) {
        console.log(res);
        console.log(res[0]);
        var name = res[0].name;
        var abv = res[0].abv;
        var description = res[0].description;
        description= description.substring(0,150);
        var label = res[0].labels.medium;

        // ==========================================

        var colDiv = $("<div class=\"col s12 m4\">");
        var cardDiv = $("<div class=\"card\">");
        var cardImg = $("<div class=\"card-image\">");
        var img = $("<img src=\"" + label + "\" />");
        var title = $("<span class=\"card-title\">" + abv + "</span>")
        var descDiv = $("<div class=\"card-content\">");
        var p = $("<p>" + description + "</p>");

        descDiv.append(p);
        cardImg.append(img);
        cardImg.append(title);
        cardDiv.append(cardImg);
        cardDiv.append(descDiv);
        colDiv.append(cardDiv);
        $("#beerHolder").append(colDiv);

        $("#input").val("")

      }
    })
  }
</script>
